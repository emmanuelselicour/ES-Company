<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Commander</title>
<style>
  body { font-family: Arial, sans-serif; background: #f5f5f5; }
  .container { max-width: 600px; margin: auto; padding: 20px; background: #fff; border-radius: 10px; }
  input, textarea { width: 100%; padding: 10px; margin: 10px 0; border-radius: 5px; border: 1px solid #ddd; }
  button { width: 100%; padding: 12px; background: #1e40af; color: white; border: none; border-radius: 5px; cursor: pointer; }
  button:hover { opacity: 0.9; }

  /* BOITE DIALOGUE */
  .modal {
    display: none;
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.5);
    justify-content: center;
    align-items: center;
  }
  .modal-content {
    background: #fff;
    padding: 20px;
    border-radius: 10px;
    text-align: center;
    width: 90%;
    max-width: 400px;
  }
  .modal-content button {
    margin-top: 15px;
    background: #22c55e;
  }
</style>
</head>
<body>

<div class="container">
  <h2>Commander</h2>

  <form id="orderForm">
    <label>Nom</label>
    <input type="text" id="name" required placeholder="Votre nom">

    <label>TÃ©lÃ©phone</label>
    <input type="text" id="phone" required placeholder="Ex: 509XXXXXXXX">

    <label>Produit</label>
    <input type="text" id="productName" required placeholder="Nom du produit">

    <label>Prix</label>
    <input type="text" id="price" required placeholder="Prix en GDS">

    <button type="submit">Envoyer la commande</button>
  </form>
</div>

<!-- BOITE DIALOGUE -->
<div id="modal" class="modal">
  <div class="modal-content">
    <h3>Merci pour votre commande ! ðŸŽ‰</h3>
    <p>Nous allons vous contacter trÃ¨s bientÃ´t pour finaliser le paiement.</p>
    <button onclick="closeModal()">OK</button>
  </div>
</div>

<script>
const form = document.getElementById("orderForm");

form.addEventListener("submit", async (e) => {
  e.preventDefault(); // IMPORTANT: empÃªche le rechargement

  const data = {
    customerName: document.getElementById("name").value,
    phone: document.getElementById("phone").value,
    productName: document.getElementById("productName").value,
    price: document.getElementById("price").value
  };

  // VÃ©rification numÃ©ro valide
  if (data.phone.length < 10) {
    alert("Veuillez entrer un numÃ©ro valide.");
    return;
  }

  // ENVOI DE LA COMMANDE
  await fetch("https://e-s-service-backend.onrender.com/orders", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(data)
  });

  // AFFICHER LA BOITE DE DIALOGUE
  document.getElementById("modal").style.display = "flex";

  // RESET FORM
  form.reset();
});

function closeModal() {
  document.getElementById("modal").style.display = "none";
}
</script>

</body>
</html>
